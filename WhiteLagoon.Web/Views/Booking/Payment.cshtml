@model Booking

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <!-- Booking Progress Bar -->
            <partial name="_BookingProgressBar" model="3" />

            <div class="card border-0 shadow-sm">
                <div class="card-body p-0">
                    <div class="row g-0">
                        <!-- Summary Column -->
                        <div class="col-lg-4 bg-light">
                            <div class="p-4 h-100 d-flex flex-column">
                                <h4 class="text-primary fw-bold mb-4">Booking Summary</h4>
                                
                                <div class="villa-summary mb-4">
                                    <img src="@Model.Villa.ImageUrl" alt="@Model.Villa.Name" class="img-fluid rounded mb-3">
                                    <h5 class="text-primary fw-semibold">@Model.Villa.Name</h5>
                                </div>
                                
                                <div class="booking-details bg-white rounded shadow-sm p-3 mb-3">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Guest</span>
                                        <span class="fw-medium">@Model.Name</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Check-in</span>
                                        <span class="fw-medium">@Model.CheckInDate.ToString("MMM dd, yyyy")</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Check-out</span>
                                        <span class="fw-medium">@Model.CheckOutDate.ToString("MMM dd, yyyy")</span>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>Nights</span>
                                        <span class="fw-medium">@Model.Nights</span>
                                    </div>
                                    <hr>
                                    <div class="d-flex justify-content-between">
                                        <span class="fw-bold">Total</span>
                                        <span class="fw-bold text-primary">@Model.TotalCost.ToString("c")</span>
                                    </div>
                                </div>
                                
                                <div class="mt-auto">
                                    <partial name="_TrustSignals" />
                                </div>
                            </div>
                        </div>
                        
                        <!-- Payment Form Column -->
                        <div class="col-lg-8">
                            <div class="p-4">
                                <h4 class="text-primary fw-bold mb-4">Payment Information</h4>
                                
                                <div class="payment-tabs mb-4">
                                    <ul class="nav nav-pills mb-3" id="payment-tab" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="credit-card-tab" data-bs-toggle="pill" data-bs-target="#credit-card" type="button" role="tab" aria-controls="credit-card" aria-selected="true">
                                                <i class="bi bi-credit-card me-2"></i> Credit Card
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="paypal-tab" data-bs-toggle="pill" data-bs-target="#paypal" type="button" role="tab" aria-controls="paypal" aria-selected="false">
                                                <i class="bi bi-paypal me-2"></i> PayPal
                                            </button>
                                        </li>
                                    </ul>
                                    
                                    <div class="tab-content" id="payment-tab-content">
                                        <!-- Credit Card Tab -->
                                        <div class="tab-pane fade show active" id="credit-card" role="tabpanel" aria-labelledby="credit-card-tab">
                                            <form method="post" asp-action="ProcessPayment" id="creditCardForm">
                                                <input asp-for="Id" hidden />
                                                <input asp-for="VillaId" hidden />
                                                <input asp-for="UserId" hidden />
                                                <input asp-for="Name" hidden />
                                                <input asp-for="Email" hidden />
                                                <input asp-for="Phone" hidden />
                                                <input asp-for="TotalCost" hidden />
                                                
                                                <div class="mb-3">
                                                    <label class="form-label">Card Holder Name</label>
                                                    <input type="text" class="form-control" placeholder="Name on card" required />
                                                </div>
                                                
                                                <div class="mb-3">
                                                    <label class="form-label">Card Number</label>
                                                    <div class="input-group">
                                                        <input type="text" class="form-control" placeholder="1234 5678 9012 3456" required />
                                                        <span class="input-group-text">
                                                            <i class="bi bi-credit-card"></i>
                                                        </span>
                                                    </div>
                                                </div>
                                                
                                                <div class="row mb-3">
                                                    <div class="col-md-6">
                                                        <label class="form-label">Expiration Date</label>
                                                        <input type="text" class="form-control" placeholder="MM/YY" required />
                                                    </div>
                                                    <div class="col-md-6">
                                                        <label class="form-label">CVV</label>
                                                        <div class="input-group">
                                                            <input type="text" class="form-control" placeholder="123" required />
                                                            <span class="input-group-text" data-bs-toggle="tooltip" data-bs-placement="top" title="3-digit security code on the back of your card">
                                                                <i class="bi bi-question-circle"></i>
                                                            </span>
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="mb-4">
                                                    <label class="form-label">Billing Address</label>
                                                    <input type="text" class="form-control mb-2" placeholder="Street Address" required />
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <input type="text" class="form-control" placeholder="City" required />
                                                        </div>
                                                        <div class="col-md-4">
                                                            <input type="text" class="form-control" placeholder="State" required />
                                                        </div>
                                                        <div class="col-md-4">
                                                            <input type="text" class="form-control" placeholder="ZIP Code" required />
                                                        </div>
                                                    </div>
                                                </div>
                                                
                                                <div class="form-check mb-4">
                                                    <input class="form-check-input" type="checkbox" id="saveCard">
                                                    <label class="form-check-label" for="saveCard">
                                                        Save this card for future bookings
                                                    </label>
                                                </div>
                                                
                                                <div class="d-grid">
                                                    <button type="submit" class="btn btn-primary btn-lg">
                                                        Pay @Model.TotalCost.ToString("c") <i class="bi bi-lock-fill ms-2"></i>
                                                    </button>
                                                </div>
                                            </form>
                                        </div>
                                        
                                        <!-- PayPal Tab -->
                                        <div class="tab-pane fade" id="paypal" role="tabpanel" aria-labelledby="paypal-tab">
                                            <div class="text-center py-5">
                                                <img src="https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_111x69.jpg" alt="PayPal" class="img-fluid mb-4" style="max-width: 150px;">
                                                <p class="mb-4">You will be redirected to PayPal to complete your payment securely.</p>
                                                <form method="post" asp-action="ProcessPayPal">
                                                    <input asp-for="Id" hidden />
                                                    <button type="submit" class="btn btn-primary btn-lg">
                                                        Continue to PayPal
                                                    </button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="order-notes mt-4">
                                    <p class="small text-muted mb-0">
                                        <i class="bi bi-shield-lock me-1"></i> Your payment information is encrypted and secure.
                                    </p>
                                    <p class="small text-muted">
                                        By completing this booking, you agree to our <a href="#">Terms of Service</a> and <a href="#">Cancellation Policy</a>.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        $(function() {
            $('[data-bs-toggle="tooltip"]').tooltip();
        });
    </script>
} 